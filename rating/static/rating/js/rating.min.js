function getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let r=0;r<n.length;r++){const o=n[r].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}}return t}function load(element,url){let xmlhttp;xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===XMLHttpRequest.DONE)if(200===xmlhttp.status){element.innerHTML=xmlhttp.responseText;const allScripts=element.getElementsByTagName("script");for(let n=0;n<allScripts.length;n++)eval(allScripts[n].innerHTML)}else alert("Error")},xmlhttp.open("GET",url,!0),xmlhttp.send()}function CreateRating(e){let t=document.querySelector(`#rating-${e}`),n=t.getAttribute("method"),r=t.getAttribute("action"),o={app_name:t.querySelector("[name='app_name']").value,model_name:t.querySelector("[name='model_name']").value,content_type:t.querySelector("[name='content_type']").value,object_id:t.querySelector("[name='object_id']").value,settings_slug:t.querySelector("[name='settings_slug']").value,rate:t.getAttribute("user_rate")},a=new XMLHttpRequest;a.open(n,r,!0),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRFToken",getCookie("csrftoken")),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status){const t=document.querySelector(`#rating-info-${e}`);t&&load(document.querySelector(`#rating-info-${e}`),`/rating/info/${e}?custom_template=${t.getAttribute("template")}`)}else alert("ERROR in Submitting Rate!")},a.send(JSON.stringify(o))}const rating_items=document.querySelectorAll("input[name^='rating-']");rating_items.forEach((function(e){const t=e.name.split("-")[1];e.addEventListener("change",(function(){document.querySelector(`#rating-${t}`).setAttribute("user_rate",this.value),CreateRating(t)})),e.addEventListener("click",(function(){this.value===document.querySelector(`#rating-${t}`).getAttribute("user_rate")&&(document.querySelector(`input[name='rating-${t}'][value='-1']`).checked=!0,document.querySelector(`#rating-${t}`).setAttribute("user_rate","-1"),CreateRating(t))}))}));